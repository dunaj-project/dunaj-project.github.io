<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<meta name="author" content="Jozef Wagner">
<title>dunaj.host.batch API</title>
<link rel="stylesheet" href="./dd.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>dunaj.host.batch API</h1>
<div class="details">
<span id="author" class="author">Jozef Wagner</span><br>
<span id="revdate">0.5.0</span>
</div>
</div>
<div id="content">
<header id="dd-header"><div id="dd-logo"><a href="http://www.dunaj.org"><img src="dunaj.png"></img>Dunaj</a></div><div id="dd-mmenu"><a class="dd-mmlink" href="about.html"><i class="fa fa-info-circle dd-mmsh"></i> <span>About</span></a><a class="dd-mmlink" href="news.html"><i class="fa fa-bullhorn dd-mmsh"></i> <span>News</span></a><a class="dd-mmlink" href="start.html"><i class="fa fa-download dd-mmsh"></i> <span>Getting Started</span></a><a class="dd-mmlink dd-mmcur" href="doc.html"><i class="fa fa-book dd-mmsh"></i> <span>Documentation</span></a><a class="dd-mmlink" href="https://github.com/dunaj-project"><i class="fa fa-github dd-mmsh"></i> <span>Source at Github</span></a></div></header><div id="dd-flex"><nav id="dd-side-nav"><div class="dd-over"><div class="dd-nav-doc-header"><a href="api.html">API</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-0">bare</div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="bare.core.api.html">.core</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-0">clojure</div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="https://clojure.github.io/clojure/"><i>official docs</i></a></div><div class="dd-nav-doc-ns dd-nav-doc-item-0">dunaj</div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.bit.api.html">.bit</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.boolean.api.html">.boolean</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.buffer.api.html">.buffer</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.char.api.html">.char</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.coll.api.html">.coll</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.array-map.api.html">.array-map</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.batched-queue.api.html">.batched-queue</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.bvt-vector.api.html">.bvt-vector</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.cons-seq.api.html">.cons-seq</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.default.api.html">.default</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.empty-list.api.html">.empty-list</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.hamt-map.api.html">.hamt-map</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.hamt-set.api.html">.hamt-set</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.helper.api.html">.helper</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.lazy-seq.api.html">.lazy-seq</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.lazy-seq-map.api.html">.lazy-seq-map</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.lazy-seq-set.api.html">.lazy-seq-set</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.linked-list.api.html">.linked-list</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.primitive-vector.api.html">.primitive-vector</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.rbt-sorted-map.api.html">.rbt-sorted-map</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.rbt-sorted-set.api.html">.rbt-sorted-set</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.recipe.api.html">.recipe</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.tuple.api.html">.tuple</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.coll.util.api.html">.util</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.compare.api.html">.compare</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.concurrent.api.html">.concurrent</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.concurrent.agent.api.html">.agent</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.concurrent.forkjoin.api.html">.forkjoin</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.concurrent.parallel.api.html">.parallel</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.concurrent.port.api.html">.port</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.concurrent.thread.api.html">.thread</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.core.api.html">.core</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.dev.api.html">.dev</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.env.api.html">.env</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.error.api.html">.error</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.feature.api.html">.feature</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.flow.api.html">.flow</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.format.api.html">.format</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.format.charset.api.html">.charset</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.format.clj.api.html">.clj</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.format.edn.api.html">.edn</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.format.helper.api.html">.helper</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.format.html.api.html">.html</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.format.json.api.html">.json</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.format.parser.api.html">.parser</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.format.printer.api.html">.printer</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.function.api.html">.function</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.host.api.html">.host</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.host.array.api.html">.array</a></div><div class="dd-nav-doc-item-cur dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.host.batch.api.html">.batch</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.host.int.api.html">.int</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.host.number.api.html">.number</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.identifier.api.html">.identifier</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.lib.api.html">.lib</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.macro.api.html">.macro</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.math.api.html">.math</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.math.angle.api.html">.angle</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.math.precise.api.html">.precise</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.math.random.api.html">.random</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.math.unchecked.api.html">.unchecked</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.namespace.api.html">.namespace</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.poly.api.html">.poly</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.regex.api.html">.regex</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.repl.api.html">.repl</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.resource.api.html">.resource</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.resource.file.api.html">.file</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.resource.helper.api.html">.helper</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.resource.host.api.html">.host</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.resource.http.api.html">.http</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.resource.loopback.api.html">.loopback</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.resource.pipe.api.html">.pipe</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.resource.secure.api.html">.secure</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.resource.selector.api.html">.selector</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.resource.tcp.api.html">.tcp</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.resource.udp.api.html">.udp</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.set.api.html">.set</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.state.api.html">.state</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.state.basic.api.html">.basic</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.state.ref.api.html">.ref</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.state.var.api.html">.var</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.state.weak.api.html">.weak</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.string.api.html">.string</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.threading.api.html">.threading</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.threading.last.api.html">.last</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-2"><a href="dunaj.threading.second.api.html">.second</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.time.api.html">.time</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.type.api.html">.type</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.uri.api.html">.uri</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.uuid.api.html">.uuid</a></div><div class="dd-nav-doc-ns dd-nav-doc-item-1"><a href="dunaj.version.api.html">.version</a></div><br></br></div></nav><nav id="dd-ns-nav"><div class="dd-over"><div class="dd-nav-ns-header"><a href="#dd-top">dunaj.host.batch</a></div><div class="dd-nav-ns-var"><a href="#batch"><i class="fa fa-fw fa-puzzle-piece dd-mmsh"></i><span class="dd-nav-ns-var-text">batch</span></a></div><div class="dd-nav-ns-var"><a href="#batch_manager"><i class="dd-referred fa fa-fw fa-chevron-right dd-vn"></i><span class="dd-referred dd-nav-ns-var-text">batch-manager</span></a></div><div class="dd-nav-ns-var"><a href="#batch_manager_from"><i class="fa fa-fw fa-chevron-right dd-vn"></i><span class="dd-nav-ns-var-text">batch-manager-from</span></a></div><div class="dd-nav-ns-var"><a href="#batch_on"><i class="fa fa-fw fa-chevron-right dd-vn"></i><span class="dd-nav-ns-var-text">batch-on</span></a></div><div class="dd-nav-ns-var"><a href="#batch_support_QMARK_"><i class="fa fa-fw fa-chevron-right dd-vn"></i><span class="dd-nav-ns-var-text">batch-support?</span></a></div><div class="dd-nav-ns-var"><a href="#decide_item_type"><i class="fa fa-fw fa-chevron-right dd-vn"></i><span class="dd-nav-ns-var-text">decide-item-type</span></a></div><div class="dd-nav-ns-var"><a href="#default_batch_size"><i class="fa fa-fw fa-inbox dd-mmsh"></i><span class="dd-nav-ns-var-text">default-batch-size</span></a></div><div class="dd-nav-ns-var"><a href="#item_types_match_QMARK_"><i class="fa fa-fw fa-chevron-right dd-vn"></i><span class="dd-nav-ns-var-text">item-types-match?</span></a></div><div class="dd-nav-ns-var"><a href="#malleable"><i class="fa fa-fw fa-chevron-right dd-vn"></i><span class="dd-nav-ns-var-text">malleable</span></a></div><div class="dd-nav-ns-var"><a href="#provide_batch_manager"><i class="fa fa-fw fa-chevron-right dd-vn"></i><span class="dd-nav-ns-var-text">provide-batch-manager</span></a></div><div class="dd-nav-ns-var"><a href="#provide_batch_size"><i class="fa fa-fw fa-chevron-right dd-vn"></i><span class="dd-nav-ns-var-text">provide-batch-size</span></a></div><div class="dd-nav-ns-var"><a href="#select_item_type"><i class="fa fa-fw fa-chevron-right dd-vn"></i><span class="dd-nav-ns-var-text">select-item-type</span></a></div><br></br></div></nav><section id="dd-content"><div class="dd-over" tabindex="-1" id="dd-focus"><div id="header"><h1 id="dd-top">dunaj.host.batch API</h1><div class="details">Copyright © 2013, 2015, &nbsp;<span class="author">Jozef Wagner</span><br><span id="revdate">version 0.5.0</span></div></div><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Batches, a wrapped host collections of primitive data, providing
fast data processing.</p>
</div>
<div class="paragraph">
<p>Batch is an abstraction for host specific low level data
containers that are used by host in bulk data processing and
manipulation, such as I/O or networking.</p>
</div>
<div class="paragraph">
<p>Batch support for given item type is host specific.
For better interop, some batch methods should be invoked through
host batch manager. This avoids reflection and simplify user code.
When you know the concrete batch type, it is best to directly
call host methods of this type.</p>
</div>
<div class="paragraph">
<p>Batches can be created from existing arrays or they can be
allocated. They support cloning and reducing.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When reducing batches, the reduction function
may not store received batch between two calls, as batches
are usually reused (cleared and filled with next data).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2 dd-var">
<h3 id="batch"><a class="link" href="#batch">batch</a></h3>
<div class="paragraph dd-added">
<p>Available since version 1.0 (<a href="https://github.com/dunaj-project/dunaj/tree/master/src/clj/dunaj/host/batch.clj#L275">view source</a>)</p>
</div>
<div class="paragraph">
<p><code><span class="icon"><i class="fa fa-unlink" title="Not referred"></i></span> not referred automatically</code></p>
</div>
<div class="paragraph">
<p><code><span class="icon"><i class="fa fa-puzzle-piece" title="Transducer"></i></span> RETURNS TRANSDUCER</code></p>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Usage: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>(batch <em>requested&#45;type size&#45;hint</em>)</code></p>
</li>
<li>
<p><code>(batch <em>requested&#45;type size&#45;hint coll</em>)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Type signatures: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>((U nil Class Type clojure.lang.Keyword) ⨯ (Maybe Integer)) → Transducer</code></p>
</li>
<li>
<p><code>((U nil Class Type clojure.lang.Keyword) ⨯ (Maybe Integer) ⨯ [&#93;) → IRed</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph docstring">
<p>Returns a transducer that batches given step items into batches of
<code><em>requested-type</em></code>, which may be a type, class or a keyword,
and of <code><em>size-hint</em></code> size.
Returns collection recipe if <code><em>coll</em></code> is given.</p>
</div>
<div class="paragraph see">
<p><span class="icon"><i class="fa fa-share" title="See also"></i></span> See also: <code><a href="dunaj.coll.util.api.html#reduce_batched">dunaj.coll.util/reduce&#45;batched</a></code>, <code><a href="dunaj.coll.util.api.html#batched">dunaj.coll.util/batched</a></code></p>
</div>
</div>
<div class="sect2 dd-var">
<h3 id="batch_manager"><a class="link" href="#batch_manager">batch-manager</a></h3>
<div class="paragraph dd-added">
<p>Available since version 1.0 (<a href="https://github.com/dunaj-project/dunaj/tree/master/src/clj/dunaj/host/batch.clj#L88">view source</a>)</p>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Usage: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>(batch&#45;manager <em>item&#45;type</em>)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Type signature: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>((U nil Class Type)) → (Maybe BatchManager)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph docstring">
<p>Returns the batch manager for a given <code><em>item-type</em></code>, or <code>nil</code>,
if host does not support batches of <code><em>item-type</em></code>.</p>
</div>
<div class="paragraph see">
<p><span class="icon"><i class="fa fa-share" title="See also"></i></span> See also: <code><a href="#batch_manager_from">batch&#45;manager&#45;from</a></code>, <code><a href="#provide_batch_manager">provide&#45;batch&#45;manager</a></code>, <code><a href="#batch_support_QMARK_">batch&#45;support?</a></code></p>
</div>
</div>
<div class="sect2 dd-var">
<h3 id="batch_manager_from"><a class="link" href="#batch_manager_from">batch-manager-from</a></h3>
<div class="paragraph dd-added">
<p>Available since version 1.0 (<a href="https://github.com/dunaj-project/dunaj/tree/master/src/clj/dunaj/host/batch.clj#L96">view source</a>)</p>
</div>
<div class="paragraph">
<p><code><span class="icon"><i class="fa fa-unlink" title="Not referred"></i></span> not referred automatically</code></p>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Usage: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>(batch&#45;manager&#45;from <em>batch</em>)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Type signature: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>(AnyBatch) → BatchManager</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph docstring">
<p>Returns batch manager from an existing <code><em>batch</em></code>.</p>
</div>
<div class="paragraph see">
<p><span class="icon"><i class="fa fa-share" title="See also"></i></span> See also: <code><a href="#batch_manager">batch&#45;manager</a></code>, <code><a href="#provide_batch_manager">provide&#45;batch&#45;manager</a></code></p>
</div>
</div>
<div class="sect2 dd-var">
<h3 id="batch_on"><a class="link" href="#batch_on">batch-on</a></h3>
<div class="paragraph dd-added">
<p>Available since version 1.0 (<a href="https://github.com/dunaj-project/dunaj/tree/master/src/clj/dunaj/host/batch.clj#L178">view source</a>)</p>
</div>
<div class="paragraph">
<p><code><span class="icon"><i class="fa fa-unlink" title="Not referred"></i></span> not referred automatically</code></p>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Usage: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>(batch&#45;on <em>arr begin end</em>)</code></p>
</li>
<li>
<p><code>(batch&#45;on <em>bm arr begin end</em>)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Type signatures: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>(AnyArray ⨯ Int ⨯ Int) → AnyBatch</code></p>
</li>
<li>
<p><code>(BatchManager ⨯ AnyArray ⨯ Int ⨯ Int) → AnyBatch</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph docstring">
<p>Returns batch based on given host array <code><em>arr</em></code> and <code><em>begin</em></code>
and <code><em>end</em></code> range in that array. Uses <code><em>bm</em></code> if given, or creates
one from array&#8217;s item type.
Throws if host does not support batches on a given array.</p>
</div>
<div class="paragraph see">
<p><span class="icon"><i class="fa fa-share" title="See also"></i></span> See also: <code><a href="#batch_support_QMARK_">batch&#45;support?</a></code></p>
</div>
</div>
<div class="sect2 dd-var">
<h3 id="batch_support_QMARK_"><a class="link" href="#batch_support_QMARK_">batch-support?</a></h3>
<div class="paragraph dd-added">
<p>Available since version 1.0 (<a href="https://github.com/dunaj-project/dunaj/tree/master/src/clj/dunaj/host/batch.clj#L170">view source</a>)</p>
</div>
<div class="paragraph">
<p><code><span class="icon"><i class="fa fa-unlink" title="Not referred"></i></span> not referred automatically</code></p>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Usage: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>(batch&#45;support? <em>item&#45;type</em>)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Type signature: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>((U nil Class Type)) → Boolean</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph docstring">
<p>Returns <code>true</code> if host supports batches of <code><em>item-type</em></code>,
otherwise returns <code>false</code>.</p>
</div>
<div class="paragraph see">
<p><span class="icon"><i class="fa fa-share" title="See also"></i></span> See also: <code><a href="#batch_manager">batch&#45;manager</a></code>, <code><a href="#select_item_type">select&#45;item&#45;type</a></code>, <code><a href="#batch_on">batch&#45;on</a></code></p>
</div>
</div>
<div class="sect2 dd-var">
<h3 id="decide_item_type"><a class="link" href="#decide_item_type">decide-item-type</a></h3>
<div class="paragraph dd-added">
<p>Available since version 1.0 (<a href="https://github.com/dunaj-project/dunaj/tree/master/src/clj/dunaj/host/batch.clj#L141">view source</a>)</p>
</div>
<div class="paragraph">
<p><code><span class="icon"><i class="fa fa-unlink" title="Not referred"></i></span> not referred automatically</code></p>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Usage: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>(decide&#45;item&#45;type <em>requested&#45;type available&#45;type</em>)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Type signature: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>((U nil Class Type) ⨯ (U nil Class Type)) → (U nil Class Type)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph docstring">
<p>Returns concrete item type, or <code>nil</code> if any type will suffice.</p>
</div>
<div class="paragraph see">
<p><span class="icon"><i class="fa fa-share" title="See also"></i></span> See also: <code><a href="#item_types_match_QMARK_">item&#45;types&#45;match?</a></code>, <code><a href="#select_item_type">select&#45;item&#45;type</a></code>, <code><a href="dunaj.coll.api.html#item_type">dunaj.coll/item&#45;type</a></code></p>
</div>
</div>
<div class="sect2 dd-var">
<h3 id="default_batch_size"><a class="link" href="#default_batch_size">default-batch-size</a></h3>
<div class="paragraph dd-added">
<p>Available since version 1.0 (<a href="https://github.com/dunaj-project/dunaj/tree/master/src/clj/dunaj/host/batch.clj#L245">view source</a>)</p>
</div>
<div class="paragraph">
<p><code><span class="icon"><i class="fa fa-unlink" title="Not referred"></i></span> not referred automatically</code></p>
</div>
<div class="paragraph">
<p><code><span class="icon"><i class="fa fa-inbox" title="Var"></i></span> VAR</code> of type <code>clojure.lang.Var</code></p>
</div>
<div class="paragraph docstring">
<p>A dynamic var holding default batch size.</p>
</div>
<div class="paragraph see">
<p><span class="icon"><i class="fa fa-share" title="See also"></i></span> See also: <code><a href="#provide_batch_size">provide&#45;batch&#45;size</a></code>, <code><a href="dunaj.coll.util.api.html#reduce_batched">dunaj.coll.util/reduce&#45;batched</a></code>, <code><a href="#batch">batch</a></code></p>
</div>
</div>
<div class="sect2 dd-var">
<h3 id="item_types_match_QMARK_"><a class="link" href="#item_types_match_QMARK_">item-types-match?</a></h3>
<div class="paragraph dd-added">
<p>Available since version 1.0 (<a href="https://github.com/dunaj-project/dunaj/tree/master/src/clj/dunaj/host/batch.clj#L129">view source</a>)</p>
</div>
<div class="paragraph">
<p><code><span class="icon"><i class="fa fa-unlink" title="Not referred"></i></span> not referred automatically</code></p>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Usage: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>(item&#45;types&#45;match? <em>requested&#45;type available&#45;type</em>)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Type signature: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>((U nil Class Type) ⨯ (U nil Class Type)) → Boolean</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph docstring">
<p>Returns <code>true</code> if item types match, <code>false</code> otherwise.</p>
</div>
<div class="paragraph see">
<p><span class="icon"><i class="fa fa-share" title="See also"></i></span> See also: <code><a href="#decide_item_type">decide&#45;item&#45;type</a></code>, <code><a href="#select_item_type">select&#45;item&#45;type</a></code>, <code><a href="dunaj.coll.api.html#item_type">dunaj.coll/item&#45;type</a></code></p>
</div>
</div>
<div class="sect2 dd-var">
<h3 id="malleable"><a class="link" href="#malleable">malleable</a></h3>
<div class="paragraph dd-added">
<p>Available since version 1.0 (<a href="https://github.com/dunaj-project/dunaj/tree/master/src/clj/dunaj/host/batch.clj#L350">view source</a>)</p>
</div>
<div class="paragraph">
<p><code><span class="icon"><i class="fa fa-unlink" title="Not referred"></i></span> not referred automatically</code></p>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Usage: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>(malleable <em>coll</em>)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Type signature: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>([&#93;) → IBatchedRed</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph docstring">
<p>Returns batchable collection which takes <code><em>size-hint</em></code> more
seriously when reduced.</p>
</div>
<div class="paragraph">
<p>Useful for cases where the cost of processing many batches is
greater than the cost of merging batched to bigger ones.
(one such case is writing to file).</p>
</div>
<div class="paragraph see">
<p><span class="icon"><i class="fa fa-share" title="See also"></i></span> See also: <code><a href="#batch">batch</a></code>, <code><a href="dunaj.coll.util.api.html#reduce_batched">dunaj.coll.util/reduce&#45;batched</a></code>, <code><a href="dunaj.coll.util.api.html#batched">dunaj.coll.util/batched</a></code></p>
</div>
</div>
<div class="sect2 dd-var">
<h3 id="provide_batch_manager"><a class="link" href="#provide_batch_manager">provide-batch-manager</a></h3>
<div class="paragraph dd-added">
<p>Available since version 1.0 (<a href="https://github.com/dunaj-project/dunaj/tree/master/src/clj/dunaj/host/batch.clj#L119">view source</a>)</p>
</div>
<div class="paragraph">
<p><code><span class="icon"><i class="fa fa-unlink" title="Not referred"></i></span> not referred automatically</code></p>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Usage: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>(provide&#45;batch&#45;manager <em>bm batch</em>)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Type signature: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>((Maybe BatchManager) ⨯ AnyBatch) → BatchManager</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph docstring">
<p>If batch manager <code><em>bm</em></code> is <code>nil</code>, finds and returns batch manager
from a given <code><em>batch</em></code>. Returns <code><em>bm</em></code> otherwise.</p>
</div>
<div class="paragraph see">
<p><span class="icon"><i class="fa fa-share" title="See also"></i></span> See also: <code><a href="#batch_manager_from">batch&#45;manager&#45;from</a></code>, <code><a href="#batch_manager">batch&#45;manager</a></code></p>
</div>
</div>
<div class="sect2 dd-var">
<h3 id="provide_batch_size"><a class="link" href="#provide_batch_size">provide-batch-size</a></h3>
<div class="paragraph dd-added">
<p>Available since version 1.0 (<a href="https://github.com/dunaj-project/dunaj/tree/master/src/clj/dunaj/host/batch.clj#L258">view source</a>)</p>
</div>
<div class="paragraph">
<p><code><span class="icon"><i class="fa fa-unlink" title="Not referred"></i></span> not referred automatically</code></p>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Usage: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>(provide&#45;batch&#45;size <em>size&#45;hint</em>)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Type signature: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>((Maybe Integer)) → Int</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph docstring">
<p>Returns batch size based on given optional <code><em>size-hint</em></code> integer.
Returned batch size is at least big as <code><em>size-hint</em></code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This promise may be dropped in later versions.
</td>
</tr>
</table>
</div>
<div class="paragraph see">
<p><span class="icon"><i class="fa fa-share" title="See also"></i></span> See also: <code><a href="#default_batch_size">default&#45;batch&#45;size</a></code>, <code><a href="dunaj.coll.util.api.html#reduce_batched">dunaj.coll.util/reduce&#45;batched</a></code>, <code><a href="#batch">batch</a></code></p>
</div>
</div>
<div class="sect2 dd-var">
<h3 id="select_item_type"><a class="link" href="#select_item_type">select-item-type</a></h3>
<div class="paragraph dd-added">
<p>Available since version 1.0 (<a href="https://github.com/dunaj-project/dunaj/tree/master/src/clj/dunaj/host/batch.clj#L152">view source</a>)</p>
</div>
<div class="paragraph">
<p><code><span class="icon"><i class="fa fa-unlink" title="Not referred"></i></span> not referred automatically</code></p>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Usage: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>(select&#45;item&#45;type <em>item&#45;type</em>)</code></p>
</li>
<li>
<p><code>(select&#45;item&#45;type <em>requested&#45;type available&#45;type</em>)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="dlist dd-usage">
<dl>
<dt class="hdlist1">Type signatures: </dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>((U nil Class Type)) → (U nil Class Type)</code></p>
</li>
<li>
<p><code>((U nil Class Type) ⨯ (U nil Class Type)) → (U nil Class Type)</code></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph docstring">
<p>Returns concrete item type from a given requested and
available types. Returns default item type (<code>byte</code>)
if any type would suffice.</p>
</div>
<div class="paragraph see">
<p><span class="icon"><i class="fa fa-share" title="See also"></i></span> See also: <code><a href="#item_types_match_QMARK_">item&#45;types&#45;match?</a></code>, <code><a href="#decide_item_type">decide&#45;item&#45;type</a></code>, <code><a href="dunaj.coll.api.html#item_type">dunaj.coll/item&#45;type</a></code></p>
</div>
</div></div></section></div><script>window.onload = function() {document.getElementById('dd-focus').focus();}</script>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-05-30 21:27:35 CEST
</div>
</div>
</body>
</html>